digraph HastaneSistemi {
    // Düğüm Tanımlamaları
    node [shape=box, style="filled", fillcolor="#ECEFF1"];
    
    start [label="BAŞLA", shape=Mdiamond, fillcolor="#C8E6C9"];
    tc_dogrulama [label="Hasta Kimlik Doğrulama\n(TC No)", shape=cylinder];
    tc_gecerli_mi [label="TC Geçerli mi?", shape=diamond, fillcolor="#FFCDD2"];
    islem_secimi [label="İşlem Seçimi:\n1-Randevu Al\n2-Tahlil Sonucu Gör", shape=box];
    
    // Randevu Akışı
    randevu_al [label="Randevu Modülü", fillcolor="#BBDEFB"];
    randevu_dongu_start [label="Randevu Döngü Başlangıcı", shape=point];
    poliklinik_sec [label="Poliklinik Seçimi"];
    doktor_listesi [label="Doktor Listesi Getir"];
    saat_uygun_mu [label="Uygun Saatler Var mı?", shape=diamond, fillcolor="#FFCDD2"];
    randevu_onay [label="Randevu Onayı ve SMS", fillcolor="#A5D6A7"];
    randevu_son [label="Randevu Akışı Tamamlandı", shape=point];

    // Tahlil Akışı
    tahlil_gor [label="Tahlil Modülü", fillcolor="#FFF9C4"];
    tahlil_var_mi [label="Tahlil Var mı?", shape=diamond, fillcolor="#FFCDD2"];
    sonuc_hazir_mi [label="Sonuç Hazır mı?", shape=diamond, fillcolor="#FFCDD2"];
    sonuc_goster [label="Sonuç Görüntüleme"];
    pdf_indir [label="PDF İndir Seçeneği", fillcolor="#FFE0B2"];
    bekleme_mesaji [label="Bekleme Mesajı\n(Sonuç Hazır Değil)", fillcolor="#EF9A9A"];
    tahlil_yok_mesaj [label="Tahlil Yok Mesajı", fillcolor="#EF9A9A"];

    // Bitiş Akışı
    baska_islem [label="Başka İşlem Yapmak İster misiniz?\n(E/H)", shape=diamond, fillcolor="#E1BEE7"];
    hata_tc [label="Geçersiz TC Uyarısı", fillcolor="#EF9A9A"];
    end [label="SON", shape=Mdiamond, fillcolor="#C8E6C9"];
    
    // Akış Bağlantıları
    start -> tc_dogrulama;
    tc_dogrulama -> tc_gecerli_mi;
    
    // TC Doğrulama Koşulu
    tc_gecerli_mi -> islem_secimi [label="Evet"];
    tc_gecerli_mi -> hata_tc [label="Hayır"];
    hata_tc -> tc_dogrulama [label="Tekrar Dene"];
    
    // İşlem Seçimi Koşulu
    islem_secimi -> randevu_al [label="1"];
    islem_secimi -> tahlil_gor [label="2"];
    
    // Randevu Akışı Detayları
    randevu_al -> randevu_dongu_start;
    randevu_dongu_start -> poliklinik_sec;
    poliklinik_sec -> doktor_listesi;
    doktor_listesi -> saat_uygun_mu;
    saat_uygun_mu -> randevu_onay [label="Evet\n(Saat Seçimi)"];
    saat_uygun_mu -> randevu_dongu_start [label="Hayır\n(Tekrar Seçim)"]; // Uygun saat yoksa döngüye dön
    randevu_onay -> randevu_son;
    randevu_son -> baska_islem;
    
    // Tahlil Akışı Detayları
    tahlil_gor -> tahlil_var_mi;
    tahlil_var_mi -> sonuc_hazir_mi [label="Evet"];
    tahlil_var_mi -> tahlil_yok_mesaj [label="Hayır"];
    
    sonuc_hazir_mi -> sonuc_goster [label="Evet"];
    sonuc_hazir_mi -> bekleme_mesaji [label="Hayır"];
    
    sonuc_goster -> pdf_indir;
    
    pdf_indir -> baska_islem;
    bekleme_mesaji -> baska_islem;
    tahlil_yok_mesaj -> baska_islem;

    // Bitiş Akışı
    baska_islem -> tc_dogrulama [label="E"]; // Döngü
    baska_islem -> end [label="H"];
}
